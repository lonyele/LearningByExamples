import * as Konva from "konva";
import * as React from "react";
// import { Image } from "react-konva";
// import Dog from "./svg/Dog.svg";
import People from "./svg/ic_group_black_24px (1).svg";
export class TestKonva extends React.Component<any, any> {
  public state = {
    image: null
  };
  public componentDidMount() {
    const width = window.innerWidth;
    const height = window.innerHeight;

    const stage = new Konva.Stage({
      container: "container",
      width,
      height
    });

    const layer = new Konva.Layer();

    const triangle = new Konva.RegularPolygon({
      x: 80,
      y: 120,
      sides: 3,
      radius: 50,
      fill: "#00D2FF",
      stroke: "black",
      strokeWidth: 4
    });

    triangle.on("click", () => {
      const fill = triangle.fill() === "yellow" ? "#00D2FF" : "yellow";
      triangle.fill(fill);
      layer.draw();
    });

    layer.add(triangle);

    const circle = new Konva.Circle({
      x: 180,
      y: 120,
      radius: 50,
      fill: "red",
      stroke: "black",
      strokeWidth: 4
    });

    // circle.on("click", function() {
    //   const fill = this.fill() === "red" ? "#00d00f" : "red";
    //   this.fill(fill);
    //   layer.draw();
    // });

    const imageObj = new Image(undefined);
    imageObj.onload = () => {
      const yoda = new Konva.Image({
        x: 50,
        y: 50,
        image: imageObj,
        width: 106,
        height: 118,
        draggable: true
      });
      yoda.cache();
      yoda.drawHitFromCache(1);
      // add the shape to the layer
      layer.add(yoda);

      // add the layer to the stage
      stage.add(layer);
    };
    imageObj.src = People;
    // "https://upload.wikimedia.org/wikipedia/commons/f/f7/Bananas.svg";

    const path = new Konva.Path({
      x: 10,
      y: 10,
      // stroke: "#000000",
      width: 50,
      height: 50,
      data: `M261.597,321.465l-1.74,0.25
        l-1.677,0.219l-1.615,0.178l-1.542,0.135l-1.5,0.104l-1.427,0.062l-1.375,0.031h-1.323l-1.26-0.042l-1.209-0.073l-1.156-0.104
        l-1.104-0.135l-1.063-0.178l-0.999-0.198l-0.959-0.229l-0.906-0.26l-0.865-0.292l-0.823-0.323l-0.771-0.355l-0.739-0.375
        l-0.688-0.406l-0.656-0.438l-0.614-0.458l-0.574-0.49l-0.541-0.511l-0.5-0.541l-0.469-0.563l-0.438-0.583l-0.406-0.615l-0.375-0.636
        l-0.656-1.333l-0.552-1.417l-0.448-1.5l-0.365-1.573l-0.281-1.656l-0.198-1.719l-0.146-1.781l-0.094-1.844l-0.052-1.906l-0.01-1.948
        l0.021-2l0.021-2.042l0.042-2.073l0.052-4.271l0.01-2.166l-2.281-48.198l-9.5,44.5c-2,8.25-4.25,16,7.75,22.25
        c8.5,7.51-1,17.76-10.25,16.51c-27.75,0.99-23.75-17.5-21.25-30.51l1.5-19l4.5-38.75l-3.75-9.75c-30.25-7.75-50.749-13.5-73.999-26
        l-16.5,2.25c-7.75,1.25-5.75,10-6.5,15.75l-2.5,15.76l-13.75,35.75l-1,2.989c-1,2.5-0.75,12.25,2.75,17.25l7.5,15.01
        c5.5,8.239,7,29.239-8.5,22.489h0.25l-11.5-4.75c-8.25-3.49-15-26.239-18-42.739l0.5-23.51c-7.25-1.989-10.25,39.75-7.25,48.51
        l7.25,21.74c2,7-6.25,9.51-12,9.51c-13.5,0-19.5-13.76-22.25-25.26l-2-8.75c-3.5-13.25-1.75-33.5,5-45.25l3.5-7.25
        c5.75-14.5-1.75-24.75-3.5-32.25c-5.75-23.5-10.5-46.25,5.75-68.75l1.5-1.74c-0.75-1.76-5.5-5.5-8.25-14.26
        c-6.25-20-11.75-52.75-4-52.75l5.25-0.25c13,0,9,54,24.75,50.5l112.499,1.25l20-5.49c7-2.01,13.249-6.51,19.75-10.51l13-8
        c14.5,14.75,27.5,24,48.749,31.75c5.75,44-0.75,53.76-6.25,80l-2,10.75c-4.25,18.761-5.5,38.25-4.5,57.75l0.5,9
        c-0.5,9.25,5,10.011,12.25,12.26C267.597,307.715,270.847,316.965,261.597,321.465h0.25H261.597z M285.597,51.967l0.563,0.417
        l0.583,0.417l1.177,0.906l1.219,0.969l1.24,1.031l1.26,1.083l1.271,1.125l1.291,1.167l1.302,1.198l1.302,1.24l1.302,1.25
        l2.573,2.562l1.26,1.292l1.25,1.292l1.219,1.281l1.187,1.281l8,8.489c5,5.25,12.75,4.5,19.5,6l2.75,0.25c7.25,4.01,5,12.01,2.5,18
        l-1.5,3.76c-7.25,17.24-28.25,18.489-43.25,10.49l-6.5-3.5h-2.25l-4.75,3l-9.25,7.51c-19.5-8.5-35.25-18.51-47.75-32.01l29-36.5
        l9.75-14l2-4.75l2.25-5.24c0,0,9-11.26,14.25-9.01c5.25,2.26,8.5,12,7.25,17l-1.5,6L285.597,51.967h0.25`,
      // data:
      //   "M127.01,129.824v210.231 M127.01,340.055l223.998-158.458 M351.008,176.891L200.89,199.64 M200.89,199.64l13.361,43.928 M214.251,243.568l-40.084,41.576 M174.167,285.144l-31.438-34.515 M142.729,250.629l38.512-55.696 M181.241,194.933l-19.256-65.109 M161.984,125.902L84.567,74.914 M84.567,74.914l-3.93,146.69 M80.638,221.604l46.372-91.78 M351.008,181.598v-4.707 M161.984,124.48v5.344",

      // data:
      //   "M 0.71499522,0.000129127 L 0.71593272,0.000823567 L 0.71690493,0.001518007 L 0.71886673,0.003028414 L 0.72089796,0.004642987 L 0.72296392,0.006361726 L 0.7250646,0.00816727 L 0.72718265,0.010042258 L 0.72933541,0.01198669 L 0.73150554,0.013983205 L 0.73367566,0.016049164 L 0.73584578,0.018132484 L 0.74013395,0.02240329 L 0.74223463,0.024556054 L 0.74431795,0.026708818 L 0.74634919,0.028844221 L 0.74832834,0.030979624 L 0.76166159,0.045128839 C 0.76999487,0.053878783 0.78291146,0.052628791 0.79416138,0.055128775 L 0.79874469,0.055545439 C 0.81082794,0.062229424 0.80707797,0.075562672 0.80291133,0.085545247 L 0.80041134,0.091812568 C 0.78832809,0.12054502 0.75332831,0.12262834 0.72832847,0.1092951 L 0.71749521,0.1034618 L 0.71374523,0.1034618 L 0.70582862,0.10846177 L 0.69041205,0.12097905 C 0.65791226,0.10681247 0.63166242,0.090128551 0.61082922,0.067628695 L 0.65916225,0.006795751 L 0.67541214,-0.016537433 L 0.67874546,-0.024454049 L 0.68249543,-0.033186632 C 0.68249543,-0.033186632 0.69749534,-0.051953873 0.70624528,-0.048203897 C 0.71499522,-0.04443656 0.72041186,-0.028204025 0.71832854,-0.019870745 L 0.71582855,-0.009870809 L 0.71499522,0.000129127 L 0.71541189,0.000129127",
      // data:
      //   "M 0.67499548,0.44929292 L 0.67209619,0.44970958 L 0.66930107,0.45007416 L 0.66661012,0.4503693 L 0.66404069,0.45059499 L 0.66154071,0.4507686 L 0.65916225,0.45087277 L 0.6568706,0.45092485 L 0.65466575,0.45092485 L 0.65256507,0.45085541 L 0.65055119,0.45073388 L 0.64862412,0.45056027 L 0.64678386,0.45033458 L 0.64501303,0.45003944 L 0.64334638,0.44970958 L 0.64174916,0.44932764 L 0.64023876,0.44889362 L 0.6387978,0.44840751 L 0.63742628,0.44786932 L 0.63614156,0.44727904 L 0.63490893,0.44665405 L 0.6337631,0.44597697 L 0.63266936,0.44524781 L 0.63164506,0.44448392 L 0.63069021,0.44366796 L 0.62978744,0.44281727 L 0.62895411,0.44191449 L 0.62817286,0.440977 L 0.6274437,0.44000478 L 0.62676662,0.43898049 L 0.62614163,0.43792146 L 0.62504788,0.43569926 L 0.62412775,0.43333816 L 0.62338123,0.43083818 L 0.62277359,0.42821667 L 0.62230484,0.42545627 L 0.62197499,0.4225917 L 0.62173193,0.41962297 L 0.62157568,0.41655007 L 0.62148888,0.41337301 L 0.62147152,0.4101265 L 0.62150624,0.40679319 L 0.62154096,0.40339044 L 0.6216104,0.3999356 L 0.62169721,0.39281759 L 0.62171457,0.3892065 L 0.61791251,0.30887715 L 0.60207928,0.38304334 C 0.59874597,0.39679326 0.59499599,0.40970984 0.61499586,0.42012644 C 0.62916244,0.43264372 0.61332921,0.44972694 0.59791264,0.44764362 C 0.55166294,0.44929292 0.55832956,0.41847714 0.5624962,0.39679326 L 0.56499618,0.36512679 L 0.57249614,0.30054387 L 0.56624618,0.28429398 C 0.51582983,0.27137739 0.48166338,0.26179412 0.44291363,0.24096092 L 0.41541381,0.2447109 C 0.40249722,0.24679421 0.40583054,0.26137745 0.40458054,0.27096073 L 0.4004139,0.29722792 L 0.37749738,0.35681087 L 0.37583073,0.36179348 C 0.37416407,0.36596012 0.37458074,0.38221001 0.38041403,0.3905433 L 0.39291395,0.4155605 C 0.40208056,0.42929305 0.40458054,0.46429282 0.37874738,0.4530429 L 0.37916404,0.4530429 L 0.3599975,0.44512628 C 0.34624758,0.43931034 0.33499766,0.40139392 0.32999769,0.3738941 L 0.33083102,0.33471032 C 0.31874776,0.33139437 0.31374779,0.4009599 0.31874776,0.4155605 L 0.33083102,0.4517929 C 0.33416433,0.4634595 0.32041442,0.4676435 0.31083114,0.4676435 C 0.28833129,0.4676435 0.27833135,0.44470961 0.27374805,0.42554307 L 0.27041474,0.41095983 C 0.26458144,0.38887664 0.26749809,0.35512686 0.27874802,0.33554365 L 0.28458131,0.32346039 C 0.29416458,0.29929388 0.28166466,0.28221065 0.27874802,0.26971074 C 0.26916474,0.23054432 0.26124813,0.1926279 0.28833129,0.15512814 L 0.29083127,0.15222885 C 0.28958128,0.14929484 0.28166466,0.14306224 0.27708136,0.12846164 C 0.26666476,0.095128519 0.25749815,0.040545535 0.27041474,0.040545535 L 0.27916468,0.040128871 C 0.30083121,0.040128871 0.29416458,0.1301283 0.32041442,0.124295 L 0.50791322,0.12637832 L 0.54124634,0.11722907 C 0.55291293,0.1138784 0.56332953,0.10637845 0.57416279,0.099711823 L 0.59582932,0.086378575 C 0.61999583,0.11096175 0.64166236,0.12637832 0.6770788,0.1392949 C 0.68666207,0.21262777 0.67582881,0.22889502 0.6666622,0.27262738 L 0.66332889,0.29054394 C 0.6562456,0.3218111 0.65416228,0.35429353 0.65582894,0.38679332 L 0.65666226,0.40179322 C 0.65582894,0.41720979 0.66499554,0.41847714 0.6770788,0.42222712 C 0.68499542,0.4263764 0.69041205,0.44179297 0.67499548,0.44929292 L 0.67541214,0.44929292 L 0.67499548,0.44929292 z",
      // data:
      //   "M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z",
      // data:
      //   "M12.582,9.551C3.251,16.237,0.921,29.021,7.08,38.564l-2.36,1.689l4.893,2.262l4.893,2.262l-0.568-5.36l-0.567-5.359l-2.365,1.694c-4.657-7.375-2.83-17.185,4.352-22.33c7.451-5.338,17.817-3.625,23.156,3.824c5.337,7.449,3.625,17.813-3.821,23.152l2.857,3.988c9.617-6.893,11.827-20.277,4.935-29.896C35.591,4.87,22.204,2.658,12.582,9.551z",
      fill: "green",
      scale: {
        x: 0.5,
        y: 0.5
      },
      draggable: true
    });

    // add the shape to the layer
    layer.add(path);

    // add the layer to the stage
    stage.add(layer);

    layer.add(circle);
    stage.add(layer);

    // const image = new (window as any).Image();
    // image.src =
    //   "https://upload.wikimedia.org/wikipedia/commons/0/00/Intramuros_map.svg";
    // image.onload = () => {
    //   // setState will redraw layer
    //   // because "image" property is changed
    //   this.setState({
    //     image
    //   });
    // };
  }

  public render() {
    return (
      <div>??</div>
      // <Image
      //   width={1300}
      //   height={700}
      //   image={this.state.image}
      //   // draggable={true}
      // />
    );
  }
}
// "https://upload.wikimedia.org/wikipedia/commons/8/89/Dog.svg"
